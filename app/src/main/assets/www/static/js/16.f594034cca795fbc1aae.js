webpackJsonp([16],{mwJ9:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("HzJ8"),s=i.n(a),l=i("aA9S"),o=i.n(l),n=i("JfVH"),c=i("jj5L"),r={data:function(){return{tableList:[],listLoading:!0,isShowEditVisible:!1,isShowAddVisible:!1,deleteVisible:!1,temp:{uid:"",cname:"",date:"",status:""},tempAddSpecies:{speciesId:"",projectId:""},total:0,page:1,pageSize:10,farmlandId:"",status:[{statusId:1,label:"启用"},{statusId:0,label:"禁用"}],value:"",searchName:"",filterTableDataEnd:[]}},created:function(){this.fetchData()},filters:{statusFilter:function(t){return{1:"success",2:"danger"}[t]}},methods:{addSpecies:function(t){var e=this;if(""===t.speciesId)return this.fetchData(),void this.$message.warning("品种ID不能为空！");this.listLoading=!0,Object(c.a)({speciesId:t.speciesId,projectId:t.projectId}).then(function(t){e.fetchData()}),this.isShowAddVisible=!1,this.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3})},getInSpeciesDetail:function(t){this.GLOBAL.species=t,console.log(t),this.$router.push("/speciesmodule/speciesdetail")},fetchData:function(){var t=this;this.listLoading=!0,Object(c.c)(this.listQuery).then(function(e){var i=e.data.rows.filter(function(e,i){return i<10*t.page&&i>=10*(t.page-1)});t.total=e.data.total,t.tableList=i,t.listLoading=!1})},doFilter:function(){var t=this;if(""===this.searchName)return this.fetchData(),void this.$message.warning("查询条件不能为空！");console.log(this.searchName),this.listLoading=!0,Object(c.c)({speciesId:this.searchName}).then(function(e){var i=e.data.rows.filter(function(e,i){return i<10*t.page&&i>=10*(t.page-1)});t.total=e.data.total,t.tableList=i,t.listLoading=!1})},clickfun:function(t){console.log(t.target.innerText)},handleUpdate:function(t){this.isShowEditVisible=!0,this.temp=o()({},t),console.log(t)},addSpeciesButton:function(){this.isShowAddVisible=!0,console.log()},deleteUpdate:function(t){console.log(t),this.deleteVisible=!0,this.temp=o()({},t),this.farmlandId=t.farmlandId},submitDelete:function(){var t=this,e=o()({},this.temp);console.log(e),console.log(this.tableList);var i=!0,a=!1,l=void 0;try{for(var c,r=s()(this.tableList);!(i=(c=r.next()).done);i=!0){var d=c.value;if(d.uid===this.temp.uid){var p=this.tableList.indexOf(d);this.tableList.splice(p,1),this.fetchData(),console.log(this.tableList);break}}}catch(t){a=!0,l=t}finally{try{!i&&r.return&&r.return()}finally{if(a)throw l}}Object(n.c)({farmlandId:this.farmlandId}).then(function(e){t.fetchData()}),this.deleteVisible=!1,this.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})},handleModifyStatus:function(t,e){this.$message({message:"操作成功",type:"success"}),console.log(t),t.status=e},updateData:function(){var t=this,e=o()({},this.temp);console.log(e),updateArticle(e).then(function(){var e=!0,i=!1,a=void 0;try{for(var l,o=s()(t.tableList);!(e=(l=o.next()).done);e=!0){var n=l.value;if(n.uid===t.temp.uid){var c=t.tableList.indexOf(n);t.tableList.splice(c,1,t.temp);break}}}catch(t){i=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw a}}t.isShowEditVisible=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})},handleSizeChange:function(t){this.page=t,console.log(this.page),this.fetchData()},handleCurrentChange:function(t){this.page=t,console.log(this.page),this.fetchData()},currentChangePage:function(t){var e=(this.page-1)*this.pageSize,i=this.page*this.pageSize;for(this.tableList=[];e<i;e++)t[e]&&this.tableList.push(t[e])}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[i("el-input",{attrs:{placeholder:"speciesId近似"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.doFilter()}}},[i("i",{staticClass:"el-icon-search"}),t._v("搜索")])],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addSpeciesButton()}}},[t._v("新增")])],1)],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableList,"max-height":"550",border:"","element-loading-text":"拼命加载中"}},[i("el-table-column",{attrs:{prop:"speciesId",label:"品种ID(本实验所内)"}}),t._v(" "),i("el-table-column",{attrs:{prop:"projectId",label:"所属项目ID"}}),t._v(" "),i("el-table-column",{attrs:{prop:"img1",label:"品种图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.img1,alt:""}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"operation",label:"操作 "},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){t.getInSpeciesDetail(e.row)}}},[t._v("\n          进入\n        ")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(i){t.deleteUpdate(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("el-pagination",{staticStyle:{"text-align":"center"},attrs:{layout:"total, prev, pager, next",background:"","page-size":10,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),i("el-dialog",{attrs:{title:"Edit",visible:t.isShowEditVisible},on:{"update:visible":function(e){t.isShowEditVisible=e}}},[i("el-form",{ref:"dataForm",attrs:{"label-width":"80px",model:t.temp}},[i("el-form-item",{attrs:{label:"姓名",prop:"cname"}},[i("el-input",{model:{value:t.temp.cname,callback:function(e){t.$set(t.temp,"cname",e)},expression:"temp.cname"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"时间",prop:"date"}},[i("el-input",{model:{value:t.temp.date,callback:function(e){t.$set(t.temp,"date",e)},expression:"temp.date"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"状态"},model:{value:t.temp.status,callback:function(e){t.$set(t.temp,"status",e)},expression:"temp.status"}},[i("el-select",{attrs:{placeholder:"启用状态"},model:{value:t.temp.status,callback:function(e){t.$set(t.temp,"status",e)},expression:"temp.status"}},t._l(t.status,function(t){return i("el-option",{key:t.statusId,attrs:{label:t.label,value:t.statusId}})}))],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.isShowEditVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{staticClass:"title1",attrs:{type:"primary",loading:t.listLoading},on:{click:t.updateData}},[t._v("确定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"Edit1",visible:t.isShowAddVisible},on:{"update:visible":function(e){t.isShowAddVisible=e}}},[i("el-form",{ref:"dataForm",attrs:{"label-width":"80px",model:t.tempAddSpecies}},[i("el-form-item",{attrs:{label:"品种ID",prop:"fname"}},[i("el-input",{attrs:{placeholder:"品种ID 必填"},model:{value:t.tempAddSpecies.speciesId,callback:function(e){t.$set(t.tempAddSpecies,"speciesId",e)},expression:"tempAddSpecies.speciesId"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"项目ID",prop:"fname"}},[i("el-input",{attrs:{placeholder:"所属项目ID 选填"},model:{value:t.tempAddSpecies.projectId,callback:function(e){t.$set(t.tempAddSpecies,"projectId",e)},expression:"tempAddSpecies.projectId"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.isShowAddVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{staticClass:"title1",attrs:{type:"primary",loading:t.listLoading},on:{click:function(e){t.addSpecies(t.tempAddSpecies)}}},[t._v("确定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"删除",visible:t.deleteVisible,width:"30%"},on:{"update:visible":function(e){t.deleteVisible=e}}},[i("span",[t._v("确认删除吗")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.deleteVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submitDelete}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]},p=i("/Xao")(r,d,!1,null,null,null);e.default=p.exports}});