webpackJsonp([18],{"Bu/O":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("aA9S"),i=a.n(l),s=a("JfVH"),n={data:function(){return{listLoading:!0,tableList:[],total:0,page:1,pageSize:10,filterTableDataEnd:[],status:[{statusId:1,label:"启用"},{statusId:0,label:"禁用"}],value:"",searchName:"",isShowEditVisible:!1,deleteVisible:!1,isShowAddVisible:!1,temp:{uid:"",cname:"",date:"",status:""},farmlandMsg:{name:"",remark:"",experimentName:"",shotId:"",rowAmount:"",columnAmount:""},type:[],experimentType:"",fieldId:"",fieldId1:""}},created:function(){var t=this;this.fetchData(),Object(s.g)().then(function(e){t.type=e.data.rows})},filters:{statusFilter:function(t){return{1:"success",2:"danger"}[t]}},methods:{addUpdate:function(){this.isShowAddVisible=!0},getInPlotList:function(t){this.GLOBAL.field=t,this.$router.push("/field")},fetchData:function(){var t=this;this.listLoading=!0,Object(s.h)({shotId:this.GLOBAL.shot.shotId}).then(function(e){var a=e.data.rows.filter(function(e,a){return a<10*t.page&&a>=10*(t.page-1)});t.total=e.data.total,t.tableList=a,t.listLoading=!1})},submitAdd:function(t){var e=this;Object(s.b)({name:this.farmlandMsg.name,experimentName:this.farmlandMsg.experimentName,shotId:this.farmlandMsg.shotId,rowAmount:this.farmlandMsg.rowAmount,columnAmount:this.farmlandMsg.columnAmount,remark:this.farmlandMsg.remark}).then(function(t){e.fetchData()}),this.isShowAddVisible=!1,this.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3})},doTypeFilter:function(){var t=this;this.listLoading=!0,Object(s.h)({shotId:this.GLOBAL.shot.shotId,experimentName:this.experimentType}).then(function(e){var a=e.data.rows.filter(function(e,a){return a<10*t.page&&a>=10*(t.page-1)});t.total=e.data.total,t.tableList=a,t.listLoading=!1})},doNameFilter:function(){var t=this;if(""===this.searchName)return this.fetchData(),void this.$message.warning("查询条件不能为空！");this.listLoading=!0,Object(s.h)({shotId:this.GLOBAL.shot.shotId,fieldName:this.searchName}).then(function(e){var a=e.data.rows.filter(function(e,a){return a<10*t.page&&a>=10*(t.page-1)});t.total=e.data.total,t.tableList=a,t.listLoading=!1})},clickfun:function(t){console.log(t.target.innerText)},handleUpdate:function(t){this.isShowEditVisible=!0,this.temp=i()({},t),console.log(t),this.fieldId=t.fieldId},deleteUpdate:function(t){console.log(t),this.deleteVisible=!0,this.temp=i()({},t),this.fieldId1=t.fieldId},submitDelete:function(){var t=this;Object(s.d)({fieldId:this.fieldId1}).then(function(e){t.fetchData()}),this.deleteVisible=!1,this.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})},handleModifyStatus:function(t,e){this.$message({message:"操作成功",type:"success"}),console.log(t),t.status=e},updateData:function(t){var e=this;Object(s.e)({fieldId:this.fieldId,name:t.name,remark:t.remark}).then(function(t){e.fetchData()}),this.isShowEditVisible=!1,this.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3})},handleSizeChange:function(t){this.page=t,console.log(this.page),this.fetchData()},handleCurrentChange:function(t){this.page=t,console.log(this.page),this.fetchData()},currentChangePage:function(t){var e=(this.page-1)*this.pageSize,a=this.page*this.pageSize;for(this.tableList=[];e<a;e++)t[e]&&this.tableList.push(t[e])}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"实验类型"},on:{change:function(e){t.doTypeFilter()}},model:{value:t.experimentType,callback:function(e){t.experimentType=e},expression:"experimentType"}},t._l(t.type,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"姓名"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.doNameFilter()}}},[a("i",{staticClass:"el-icon-search"}),t._v("搜索")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addUpdate()}}},[t._v("新增")])],1)],1)],1),t._v(" "),a("div",[a("div",{staticStyle:{float:"left",width:"50%"}},[a("el-col",{staticStyle:{width:"100%",height:"100%"},attrs:{span:6}},[a("img",{staticStyle:{"max-width":"90%","max-height":"100%",width:"2000px"},attrs:{src:this.GLOBAL.shot.imgUrl}})])],1),t._v(" "),a("div",{staticStyle:{float:"right",width:"50%"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableList,"max-height":"550",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"fieldId",label:"试验田序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"试验田名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"experimentName",label:"试验类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作 "},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.handleUpdate(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.getInPlotList(e.row)}}},[t._v("进入")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){t.deleteUpdate(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{layout:"total, prev, pager, next",background:"","page-size":10,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),a("el-dialog",{attrs:{title:"Edit",visible:t.isShowEditVisible},on:{"update:visible":function(e){t.isShowEditVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{"label-width":"80px",model:t.farmlandMsg}},[a("el-form-item",{attrs:{label:"Field名称",prop:"fieldName"}},[a("el-input",{model:{value:t.farmlandMsg.name,callback:function(e){t.$set(t.farmlandMsg,"name",e)},expression:"farmlandMsg.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{model:{value:t.farmlandMsg.remark,callback:function(e){t.$set(t.farmlandMsg,"remark",e)},expression:"farmlandMsg.remark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowEditVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"title1",attrs:{type:"primary",loading:t.listLoading},on:{click:function(e){t.updateData(t.farmlandMsg)}}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新增",visible:t.isShowAddVisible},on:{"update:visible":function(e){t.isShowAddVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{"label-width":"80px",model:t.farmlandMsg}},[a("el-form-item",{attrs:{label:"名字",prop:"name"}},[a("el-input",{model:{value:t.farmlandMsg.name,callback:function(e){t.$set(t.farmlandMsg,"name",e)},expression:"farmlandMsg.name"}})],1)],1),t._v(" "),a("el-form",{ref:"dataForm",attrs:{"label-width":"80px",model:t.farmlandMsg}},[a("el-form-item",{attrs:{label:"实验类型",prop:"experimentName"}},[a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"实验类型"},model:{value:t.experimentType,callback:function(e){t.experimentType=e},expression:"experimentType"}},t._l(t.type,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1)],1)],1),t._v(" "),a("el-form",{ref:"dataForm",attrs:{"label-width":"80px",model:t.farmlandMsg}},[a("el-form-item",{attrs:{label:"shotId",prop:"shotId"}},[a("el-input",{model:{value:t.farmlandMsg.shotId,callback:function(e){t.$set(t.farmlandMsg,"shotId",e)},expression:"farmlandMsg.shotId"}})],1)],1),t._v(" "),a("el-form",{ref:"dataForm",attrs:{"label-width":"80px",model:t.farmlandMsg}},[a("el-form-item",{attrs:{label:"行数",prop:"rowAmount"}},[a("el-input",{model:{value:t.farmlandMsg.rowAmount,callback:function(e){t.$set(t.farmlandMsg,"rowAmount",e)},expression:"farmlandMsg.rowAmount"}})],1)],1),t._v(" "),a("el-form",{ref:"dataForm",attrs:{"label-width":"80px",model:t.farmlandMsg}},[a("el-form-item",{attrs:{label:"列数",prop:"columnAmount"}},[a("el-input",{model:{value:t.farmlandMsg.columnAmount,callback:function(e){t.$set(t.farmlandMsg,"columnAmount",e)},expression:"farmlandMsg.columnAmount"}})],1)],1),t._v(" "),a("el-form",{ref:"dataForm",attrs:{"label-width":"80px",model:t.farmlandMsg}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{model:{value:t.farmlandMsg.remark,callback:function(e){t.$set(t.farmlandMsg,"remark",e)},expression:"farmlandMsg.remark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowAddVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"title1",attrs:{type:"primary",loading:t.listLoading},on:{click:function(e){t.submitAdd(t.farmlandMsg)}}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"删除",visible:t.deleteVisible,width:"30%"},on:{"update:visible":function(e){t.deleteVisible=e}}},[a("span",[t._v("确认删除吗")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.deleteVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitDelete}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]},r=a("/Xao")(n,o,!1,null,null,null);e.default=r.exports}});